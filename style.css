/* Minimal, clean calendar styles */
:root {
  --bg:#fff;
  --text:#1f2937;
  --card:#fff;
  --grid:#d1d5db;
  --muted:#6b7280;
  --accent:#f6a32a;
  --event:#fff3d6;
  /* Teacher palette */
  --t-ton-bg:#f3f4f6;   /* pastel gray */
  --t-ton-border:#6b7280;
  --t-boy-bg:#ffe5e5;   /* pastel red */
  --t-boy-border:#f87171;
  --t-nueng-bg:#e7f8e7; /* pastel green */
  --t-nueng-border:#10b981;
  --t-ek-bg:#ffe1ef;    /* pastel pink */
  --t-ek-border:#f472b6;
  --t-others-bg:#ffe9d6;/* pastel orange */
  --t-others-border:#f59e0b;
}
body {
  font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  margin:0;
  /* Subtle uplifting gradient (light yellow â†’ peach) over image */
  background-image:
    linear-gradient(to bottom,
      rgba(255,249,230,0.95),
      rgba(255,230,194,0.92),
      rgba(255,210,179,0.90)
    ),
    url('music-bg.png');
  background-size: 100% 100%, cover;
  background-repeat: no-repeat, no-repeat;
  background-position: center top, center top;
  background-attachment: fixed, fixed;
  min-height: 100vh;
}
.page-shell{
  width:min(1120px, 100%);
  margin:0 auto;
  padding:24px 16px 96px;
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
  gap:24px;
}
.hero{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  text-align:center;
}
.hero-actions{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:10px;
}
.btn-utility{
  background:#0f172a;
  color:#fff;
  border:0;
  border-radius:999px;
  padding:10px 20px;
  font-weight:600;
  letter-spacing:0.3px;
  cursor:pointer;
  box-shadow:0 10px 24px rgba(15,23,42,0.18);
  transition:transform 0.15s ease, filter 0.15s ease;
}
.btn-utility:hover{ filter:brightness(1.05); transform:translateY(-1px); }
.btn-utility:active{ transform:translateY(0); }
.main-content{
  display:flex;
  flex-direction:column;
  gap:24px;
}
.calendar-section{ position:relative; }
h1 {
  text-align:center;
  font-weight:700;
  margin:8px 0 8px;
  letter-spacing:0.2px;
  color:#0f172a;
  position:relative;
}
/* Gradient divider + slogan just under h1 */
.header-divider{ height:2px; width:min(720px, 92%); margin:8px auto 4px; border-radius:999px; background:linear-gradient(90deg,#FFA500,#FFD700); }
.slogan{ text-align:center; color:#6b7280; margin:4px 0 12px; font-size:clamp(12px, 1.8vw, 14px); }
.cal-nav{ display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; padding:4px 4px 0; }
.cal-nav__buttons{ display:flex; gap:8px; flex-wrap:wrap; }
.cal-nav__range{ font-weight:600; color:#0f172a; }
#calendar { width:100%; margin:0; position:relative; padding:16px; background:#ffffff; border-radius:16px; box-shadow:0 12px 30px rgba(0,0,0,0.12); display:flex; flex-direction:column; gap:16px; }
.cal-table-wrap{ overflow-x:auto; overflow-y:hidden; border-radius:12px; border:1px solid var(--grid); background:#fff; }
.cal-table { position: relative; z-index: 1; }
.time-gradient-overlay{ position:absolute; pointer-events:none; z-index:0; background:linear-gradient(180deg,#fff6cc 0%, #e6f0ff 100%); border-right:1px solid var(--grid); }
.cal-table { width:100%; min-width:720px; border-collapse:separate; border-spacing:0; table-layout:fixed; background:#fff; border-radius:12px; overflow:hidden; border:0; }
.cal-table th,.cal-table td{ border:1px solid var(--grid); vertical-align:top; }
.cal-table thead th{ position:sticky; top:0; background:#fff4df; z-index:1; padding:12px; font-weight:600; color:var(--accent); font-size:14px; }
.cal-table thead th:first-child{ border-top-left-radius:12px; }
.cal-table thead th:last-child{ border-top-right-radius:12px; }
.cal-table thead th.is-today{ background:#FFE5C2; box-shadow:inset 0 0 0 2px rgba(246,163,42,0.35); color:#d97706; }
.cal-header__dow{ display:block; font-size:12px; letter-spacing:0.8px; text-transform:uppercase; color:var(--accent); }
.cal-header__date{ display:block; font-weight:700; color:#0f172a; font-size:16px; margin-top:4px; }
.cal-header__year{ display:block; font-size:11px; color:var(--muted); margin-top:2px; font-weight:500; letter-spacing:0.4px; }
.cal-time{ width:78px; font-size:13px; color:var(--accent); text-align:right; padding:8px; background:transparent; position:relative; z-index:2; font-weight:600; text-shadow:0 1px 0 rgba(255,255,255,0.75); }
.cal-cell{ height:72px; padding:8px; cursor:pointer; background:rgba(255,255,255,0.95); }
.cal-cell.is-today{ background:rgba(255,229,194,0.45); outline:2px solid rgba(246,163,42,0.28); outline-offset:-2px; }
.cal-cell:hover{ filter:brightness(0.98); }
.dow-0{ background:#ffe5e5; } /* Sunday pastel red */
.dow-1{ background:#fff6cc; } /* Monday pastel yellow */
.dow-2{ background:#ffe1ef; } /* Tuesday pastel pink */
.dow-3{ background:#e7f8e7; } /* Wednesday pastel green */
.dow-4{ background:#ffe9d6; } /* Thursday pastel orange */
.dow-5{ background:#e6f0ff; } /* Friday pastel blue */
.dow-6{ background:#efe6ff; } /* Saturday pastel purple */
.booking{
  background:var(--event);
  border-left:3px solid var(--accent);
  border-radius:10px;
  padding:8px 10px;
  margin:6px 0;
  font-size:13px;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:6px;
  color:#0f172a;
  box-shadow:0 1px 0 rgba(255,255,255,0.9) inset, 0 1px 2px rgba(0,0,0,0.05);
}
.booking .info > span{ font-weight:600; }
.booking .actions{ display:flex; gap:6px; flex-wrap:wrap; }
.booking.teacher-ton{ background:var(--t-ton-bg); border-left-color:var(--t-ton-border); color:#111827; }
.booking.teacher-boy{ background:var(--t-boy-bg); border-left-color:var(--t-boy-border); color:#111827; }
.booking.teacher-nueng{ background:var(--t-nueng-bg); border-left-color:var(--t-nueng-border); color:#0b3d2e; }
.booking.teacher-ek{ background:var(--t-ek-bg); border-left-color:var(--t-ek-border); color:#111827; }
.booking.teacher-others{ background:var(--t-others-bg); border-left-color:var(--t-others-border); color:#111827; }
.booking .leave{ background:var(--accent); color:#fff; border:0; border-radius:6px; padding:2px 6px; font-size:11px; cursor:pointer; }
.booking .leave:hover{ filter:brightness(1.05); }
.booking .move{ background:#111827; color:#fff; border:0; border-radius:6px; padding:2px 6px; font-size:11px; cursor:pointer; }
.booking .move:hover{ filter:brightness(1.05); }

/* Modal */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,0.4); display:grid; place-items:start end; padding:70px 16px 16px; z-index:4000; }
.modal[hidden]{ display:none !important; }
.modal-card{ width:min(420px, calc(100vw - 32px)); background:#fff; border:1px solid var(--grid); border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,0.15); overflow:hidden; }
.modal-header{ display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--grid); background:#fafafa; border-top-left-radius:12px; border-top-right-radius:12px; }
.modal-title{ font-weight:700; }
.modal-close{ background:transparent; border:0; font-size:20px; cursor:pointer; }
.modal-body{ padding:12px; display:grid; gap:10px; box-sizing:border-box; }
.grid.two{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.modal-body input,
.modal-body select,
.modal-body textarea{
  padding:10px 12px;
  border:1px solid var(--grid);
  border-radius:10px;
  width:100%;
  box-sizing:border-box;
  background:#fff;
  box-shadow:0 1px 2px rgba(0,0,0,0.04) inset;
}
.modal-body input:focus,
.modal-body select:focus,
.modal-body textarea:focus{
  outline:none;
  border-color:rgba(246,163,42,0.7);
  box-shadow:0 0 0 3px rgba(246,163,42,0.15);
}
.btn-primary{ background:var(--accent); color:#fff; border:0; border-radius:10px; padding:10px 12px; font-weight:700; cursor:pointer; box-shadow:0 2px 6px rgba(246,163,42,0.25); }
.btn-secondary{ background:#e5e7eb; color:#111827; border:0; border-radius:10px; padding:10px 12px; font-weight:600; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,0.06); }
.btn-primary:hover{ filter:brightness(1.05); }
.btn-secondary:hover{ filter:brightness(0.98); }

/* Notes button */
.notes-btn{ position:fixed; left:12px; top:12px; background:#111827; color:#fff; border:0; border-radius:8px; padding:6px 10px; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,0.15); }

/* Loading spinner */
.loading-spinner{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(15,23,42,0.18);
  backdrop-filter:blur(4px);
  z-index:6000;
}
.loading-spinner[hidden]{ display:none !important; }
.loading-spinner__card{
  display:flex;
  align-items:center;
  gap:12px;
  padding:16px 22px;
  border-radius:20px;
  background:linear-gradient(135deg, rgba(255,240,214,0.95), rgba(255,224,182,0.95));
  box-shadow:0 18px 40px rgba(247,132,93,0.28);
  border:1px solid rgba(246,163,42,0.35);
  color:#8b4513;
  font-size:14px;
  font-weight:700;
  letter-spacing:0.3px;
}
.loading-spinner__dot{
  width:22px;
  height:22px;
  border-radius:50%;
  border:3px solid rgba(246,163,42,0.25);
  border-top-color:#f6a32a;
  animation:spinner-rotate 0.8s linear infinite;
  box-shadow:0 0 0 3px rgba(255,255,255,0.55);
}
@keyframes spinner-rotate{
  to{ transform:rotate(360deg); }
}

/* Brand logo */
.brand-logo{ display:block; margin:8px auto 6px; width:140px; height:auto; object-fit:contain; }

/* Add button inside cell */
.cell-actions{ display:flex; justify-content:flex-end; }
.add-btn{ background:#10b981; color:#fff; border:0; border-radius:6px; padding:2px 6px; font-size:11px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; gap:4px; font-weight:600; letter-spacing:0.3px; }
.slot-bookings{ margin-top:4px; display:flex; flex-direction:column; gap:8px; }

.cal-stack{ display:none; flex-direction:column; gap:16px; }
.cal-stack__day{ background:#fff; border:1px solid var(--grid); border-radius:16px; box-shadow:0 12px 30px rgba(0,0,0,0.12); overflow:hidden; }
.cal-stack__day.is-today{ border-color:rgba(246,163,42,0.55); box-shadow:0 14px 32px rgba(246,163,42,0.18); }
.cal-stack__header{ display:flex; align-items:center; justify-content:space-between; padding:14px 16px; background:#fff4df; }
.cal-stack__heading{ display:flex; flex-direction:column; gap:4px; }
.cal-stack__dow{ font-size:13px; font-weight:600; letter-spacing:0.8px; color:var(--accent); text-transform:uppercase; }
.cal-stack__date{ font-size:20px; font-weight:700; color:#0f172a; line-height:1.1; }
.cal-stack__year{ font-size:12px; font-weight:600; color:var(--muted); letter-spacing:0.4px; text-transform:uppercase; }
.cal-stack__slots{ display:flex; flex-direction:column; }
.cal-stack__slot{ display:flex; flex-direction:column; gap:8px; padding:14px 16px; border-top:1px solid var(--grid); background:#fff; }
.cal-stack__slot:first-child{ border-top:0; }
.cal-stack__slot-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.cal-stack__time{ font-size:16px; font-weight:600; color:var(--accent); }
.cal-stack__slot .add-btn{ padding:6px 12px; font-size:12px; border-radius:999px; }
.cal-stack__slot .slot-bookings{ display:flex; flex-direction:column; gap:8px; margin-top:0; }

.data-modal{ width:min(720px, calc(100vw - 32px)); max-height:80vh; display:flex; flex-direction:column; }
.data-modal__body{ max-height:calc(80vh - 64px); overflow-y:auto; display:grid; gap:12px; padding:18px; }
.data-empty{ margin:0; color:#b45309; text-align:center; padding:24px 12px; font-weight:600; letter-spacing:0.3px; }
.data-modal--students{ border-radius:18px; box-shadow:0 18px 36px rgba(247,132,93,0.22); }
.data-modal--students .modal-header{
  background:linear-gradient(135deg, rgba(255,240,214,0.95), rgba(255,224,182,0.95));
  border-bottom:1px solid rgba(246,163,42,0.4);
  box-shadow:0 12px 24px rgba(247,132,93,0.18);
  border-top-left-radius:18px;
  border-top-right-radius:18px;
}
.data-modal--students .modal-title{ color:#b45309; }
.data-modal--students .data-modal__body{
  background:linear-gradient(180deg, rgba(255,249,235,0.92), rgba(255,234,205,0.88));
  border-top:1px solid rgba(246,163,42,0.35);
  border-bottom-left-radius:18px;
  border-bottom-right-radius:18px;
}
.student-list{ margin:0; padding:0; list-style:none; display:flex; flex-direction:column; gap:12px; }
.student-item{ border:1px solid rgba(246,163,42,0.35); border-radius:16px; padding:16px 18px; background:linear-gradient(135deg, rgba(255,244,223,0.95), rgba(255,228,196,0.9)); box-shadow:0 12px 28px rgba(247,132,93,0.18); display:flex; flex-direction:column; gap:12px; }
.student-item__header{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.student-item__title{ font-weight:700; color:#8b4513; font-size:16px; letter-spacing:0.2px; }
.student-item__toggle{ background:rgba(15,23,42,0.12); border:0; border-radius:999px; padding:6px 12px; font-size:12px; font-weight:600; letter-spacing:0.3px; color:#8b4513; cursor:pointer; display:inline-flex; align-items:center; gap:6px; box-shadow:0 6px 14px rgba(0,0,0,0.08); transition:filter 0.15s ease, transform 0.15s ease; }
.student-item__toggle:hover{ filter:brightness(1.05); transform:translateY(-1px); }
.student-item__toggle[aria-expanded="true"]{ background:rgba(15,23,42,0.2); color:#6b2f08; }
.student-item__pills{ display:flex; flex-wrap:wrap; gap:8px; }
.student-item__pill{ display:inline-flex; align-items:center; gap:6px; border-radius:999px; padding:6px 12px; font-size:12px; font-weight:600; letter-spacing:0.3px; background:rgba(255,255,255,0.85); border:1px solid rgba(255,255,255,0.45); color:#b45309; box-shadow:0 4px 10px rgba(0,0,0,0.05); }
.student-item__pill--used{ background:rgba(16,185,129,0.15); border-color:rgba(16,185,129,0.35); color:#047857; }
.student-item__pill--remaining{ background:rgba(246,163,42,0.18); border-color:rgba(246,163,42,0.4); color:#b45309; }
.student-item__pill--total{ background:rgba(15,23,42,0.12); border-color:rgba(15,23,42,0.28); color:#0f172a; }
.student-item__teachers{ display:flex; flex-wrap:wrap; gap:6px; align-items:center; font-size:12px; color:#92400e; }
.student-item__teachers-label{ font-weight:600; letter-spacing:0.3px; }
.student-item__teacher-chip{ background:rgba(255,255,255,0.82); border-radius:999px; padding:4px 10px; border:1px dashed rgba(246,163,42,0.45); }
.student-item__teacher-chip.is-empty{ color:#6b7280; border-color:rgba(209,213,219,0.65); background:rgba(255,255,255,0.65); }
.student-item__details{ display:none; flex-direction:column; gap:10px; border-top:1px dashed rgba(246,163,42,0.35); padding-top:10px; margin-top:6px; }
.student-item__details.is-open{ display:flex; }
.student-item__details-label{ font-weight:600; letter-spacing:0.3px; color:#b45309; font-size:12px; text-transform:uppercase; }
.student-item__dates{ margin:4px 0 0; padding-left:18px; list-style:disc; display:flex; flex-direction:column; gap:4px; color:#8b4513; font-size:12px; }
.teacher-list{ margin:0; padding:0; list-style:none; display:flex; flex-direction:column; gap:12px; }
.teacher-row{ border:1px solid var(--grid); border-radius:12px; padding:12px 16px; background:#fff; box-shadow:0 8px 20px rgba(0,0,0,0.05); display:flex; flex-direction:column; gap:8px; }
.teacher-row__head{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.teacher-name{ font-weight:700; color:#0f172a; font-size:16px; }
.teacher-count{ background:var(--accent); color:#fff; border:0; border-radius:999px; padding:6px 16px; font-weight:600; cursor:pointer; box-shadow:0 8px 18px rgba(246,163,42,0.25); display:inline-flex; align-items:center; gap:6px; transition:filter 0.15s ease; }
.teacher-count:hover{ filter:brightness(1.05); }
.teacher-details{ display:none; flex-direction:column; gap:6px; padding-top:6px; border-top:1px dashed var(--grid); }
.teacher-details.is-open{ display:flex; }
.teacher-students{ margin:0; padding-left:16px; list-style:disc; display:flex; flex-direction:column; gap:4px; color:#374151; font-size:13px; }
.teacher-student__count{ font-weight:600; color:#0f172a; margin-left:6px; }
.teacher-student__instrument{ color:var(--muted); }
.teacher-month-caption{ font-size:13px; color:var(--muted); text-align:center; margin-top:-6px; }
.teacher-details__empty{ font-size:13px; color:var(--muted); padding:6px 0; }

/* Removed +1/-1 pop menu */

/* Tooltip */
.tooltip{ position:absolute; background:#111827; color:#fff; padding:6px 8px; border-radius:6px; font-size:12px; pointer-events:none; z-index:2000; }

/* Ensure inputs inside modals never overflow */
.modal-card * { min-width:0; }

/* Center the modals */
#leaveModal.modal,
#addModal.modal,
#notesModal.modal,
#moveModal.modal{ place-items:center; padding:16px; }

/* Toast */
.toast{ position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
  background:#111827; color:#fff; padding:10px 14px; border-radius:10px; font-size:13px; box-shadow:0 8px 20px rgba(0,0,0,0.2); z-index:5000; opacity:0; transition:opacity .15s ease, transform .15s ease; }
.toast.show{ opacity:1; transform:translateX(-50%) translateY(0); }

/* Decorative bottom wave */
body::after{
  content:""; position:fixed; left:0; right:0; bottom:0; height:140px; z-index:-1;
  background: radial-gradient(120% 120% at 50% 0%, rgba(247,132,93,0.9) 0%, rgba(247,132,93,0.6) 60%, rgba(247,132,93,0) 61%)
              ,linear-gradient(0deg, rgba(247,132,93,0.8), rgba(247,132,93,0.6));
}

/* Responsive tweaks */
@media (max-width: 1024px){
  body{ background-attachment: scroll, scroll; }
  .page-shell{ padding:20px 14px 84px; }
  #calendar{ padding:14px; border-radius:14px; }
  .cal-nav__range{ font-size:clamp(14px, 2.8vw, 16px); }
  .cal-header__date{ font-size:15px; }
  .cal-header__year{ font-size:10px; }
  .booking{ font-size:12px; }
}
@media (max-width: 860px){
  #calendar{ padding:0; background:transparent; box-shadow:none; gap:16px; }
  .cal-table-wrap{ display:none; }
  .cal-stack{ display:flex; }
  .cal-nav{ padding:12px; border-radius:14px; background:#fff; box-shadow:0 10px 24px rgba(0,0,0,0.12); gap:12px; }
  .cal-nav__buttons{ width:100%; justify-content:space-between; }
  .cal-nav__buttons .btn-primary{ flex:1 1 auto; min-width:0; }
}
@media (max-width: 768px){
  .cal-nav{ flex-direction:column; align-items:stretch; gap:16px; }
  .cal-nav__buttons{ justify-content:center; }
  .cal-nav__range{ text-align:center; }
  .cal-table-wrap{ border-radius:14px; }
  .cal-stack__header{ padding:12px 16px; }
  .cal-stack__date{ font-size:18px; }
  .cal-stack__slot{ padding:12px 14px; }
  .cal-stack__slot .add-btn{ font-size:11px; padding:6px 10px; }
  .cal-stack__time{ font-size:15px; }
}
@media (max-width: 600px){
  .hero{ gap:10px; }
  h1{ font-size:clamp(22px, 6vw, 26px); }
  .slogan{ font-size:clamp(12px, 3.2vw, 14px); }
  .notes-btn{ left:auto; right:16px; top:auto; bottom:18px; transform:none; border-radius:999px; padding:10px 16px; box-shadow:0 10px 20px rgba(0,0,0,0.18); }
  .cal-nav__buttons{ gap:10px; flex-direction:column; }
  .cal-nav__buttons .btn-primary{ flex:1 1 auto; min-width:0; width:100%; }
  .page-shell{ padding:18px 12px 72px; }
  .cal-nav{ padding:12px 14px; }
  .hero-actions{ gap:10px; }
  .btn-utility{ width:100%; justify-content:center; }
  .cal-stack__year{ display:none; }
  .cal-stack__date{ font-size:16px; }
  .cal-stack__dow{ font-size:12px; }
  .cal-stack__slot{ padding:10px 12px; }
  .cal-stack__slot-head{ align-items:flex-start; }
  .cal-stack__time{ font-size:14px; }
  .cal-stack__slot .add-btn{ font-size:11px; padding:5px 10px; }
  .booking{ font-size:11px; }
  .student-item{ padding:14px 16px; gap:10px; }
  .student-item__title{ font-size:15px; }
  .student-item__pill{ font-size:11px; padding:5px 10px; }
  .student-item__teachers{ font-size:11px; }
  .student-item__toggle{ font-size:11px; padding:5px 10px; }
  .student-item__dates{ font-size:11px; }
}
@media (max-width: 480px){
  #calendar{ padding:0; }
  .btn-primary, .btn-secondary{ padding:8px 12px; font-size:14px; }
  .btn-utility{ padding:10px 16px; }
  .cal-stack__date{ font-size:15px; }
  .cal-stack__slot{ padding:10px; }
  .cal-stack__slot .add-btn{ width:100%; justify-content:center; }
  .cal-stack__slot-head{ flex-direction:column; align-items:flex-start; gap:6px; }
  .student-item{ padding:12px 14px; }
  .student-item__pill{ padding:5px 9px; }
  .student-item__toggle{ width:100%; justify-content:center; }
}
